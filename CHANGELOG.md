# CHANGES in 1.X

### 1.6.0

 - POST /users system endpoint to register new user only in service-register
 - PUT /users system endpoint to update a user only in service-register
 - POST /users/validate system endpoint to validate user data only in service-register

## 1.3.X

### 1.3.65

 - GET /admin/users/:username enpoint - authorization with role 'system' instead of 'admin'

### 1.3.64

 - GET /admin/users/:username endpoint
 - /admin/users/invitations renamed to /admin/invitations

### 1.3.62

 - expireAfter, deviceName & referer parameters accepted as payload to POST /access endpoint
 - return 400 with correct error if JSON is malformed

### 1.3.61

 - fix appid was not stored at user creation

### 1.3.60

 - accept serviceInfo object in auth request
 - provide `serviceInfo` and `pryvApiEndpoint` if ACCEPTED
 - fetch serviceInfo params from config `service` object
 - move access-related config to access, renaming some
 - serviceInfo['event-types] -> serviceInfo.eventTypes

### before

- Add new route to set new records in dns

- Server sends a report to https://reporting.pryv.com upon start

- Convert simple configuration (mostly hostings) to expected configuration

- Update to node 12.13.1

- Add custom auth url to Auth access.
- Move route /service/infos to /service/info. Keep /service/infos for backward compatibility.
- Enhance route /service/info with new values.

- Added UDP6 querying support 

- Improves some API endpoints. In particular, from 1.3.42, we will prefer GET /:email/username to the depreciated GET /:email/uid. Also, from 1.3.43, the system call for updating emails will throw consistent errors.

- The Pryv.io DNS now supports TXT records at the root of the domain associated with the platform allowing to perform DNS validation with a wider range of providers and SPF records for the domain.

- We updated Redis to version 5.0.2 (pryv/redis:1.3.38) and now use an up-to-date default redis configuration, based on http://download.redis.io/redis-stable/redis.conf.

- From 1.3.38, most of the parameters required during app authorization will be provided by register within the auth state in response to poll calls. In other words, the auth url generated by register (usually pointing to app-web-auth) will mainly contain a poll key as query parameter. Other parameters such as requestedPermissions, previously provided as query parameters, will only be provided within the polled auth state. This means that previous implementations of the app authorization flow, such as app-web-auth2 or client apps using custom implementation of this flow, will not be compatible with this version of register (and next ones), unless they adapt to rely on the polling result instead of on the query parameters in the auth url.

- Usernames and email addresses are now case insensitive. Also, we've removed 
  limits on the email field, only imposing a length limit of 300 chars. 

- Removes https support. We deploy this behind a WAF or behind an nginx reverse
  proxy, so we don't ever need the https option. Plus: Less options for security
  = more security. 

- Removes the oauth2 configuration value and the code implementing an OAuth2 
  server. This was not used in practice; less functionality = less maintenance. 

## 1.2.X

- By adding a 'certificateAuthorityAuthorization' section in your configuration 
  file, you can now configure CAA records (certificate authority authorisation).

- Fix DNS vulnerability 2018022101: DNS does not answer to DNS replies anymore.

- Fix DNS vulnerability 2018022102: DNS now explicitely advertise that it is not recursive.

- Remove 2 optional unused services (ssh and cron) from our docker image.

- invitation tokens for user creation is now customisable administrator can:
  - remove check for invitationToken
  - disable user creation
  - define a list of valid tokens
